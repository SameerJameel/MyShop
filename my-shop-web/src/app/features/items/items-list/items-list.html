<div class="items-page" dir="rtl">

  <p-toolbar>
    <div class="p-toolbar-group-left">
      <h2>ุงูุฃุตูุงู</h2>
    </div>
    <div class="p-toolbar-group-right">
      <p-button label="ุฅุถุงูุฉ ุตูู" icon="pi pi-plus" (onClick)="openAddForm()" />
    </div>
  </p-toolbar>

  <div class="filters">
    <input
      pInputText
      placeholder="ุจุญุซ..."
      [(ngModel)]="search"
      (input)="applyFilter()" />

    <p-autoComplete
  [(ngModel)]="selectedCategory"
  [suggestions]="filteredCategories"
  (completeMethod)="searchCategories($event)"
  (onSelect)="onCategorySelect($event)"
  (onClear)="onCategoryClear()"
  optionLabel="name"
  placeholder="ูู ุงููุฌููุนุงุช"
  [dropdown]="true">
</p-autoComplete>

     
  </div>

  <p-tabs value="0">

  <!-- ุฑุคูุณ ุงูุชุงุจุงุช ๐๐๏ธ-->
  <p-tablist>
    <p-tab  value="0">  <p-tab  value="0"> <i class="pi pi-table" style="color: #708090"></i></p-tab></p-tab>
    <p-tab value="1">  <p-tab  value="0"> <i class="pi pi-list" style="color: #708090"></i></p-tab></p-tab>
  </p-tablist>

  <!-- ูุญุชูู ุงูุชุงุจุงุช -->
  <p-tabpanels>

    <!-- ุฌุฏูู -->
    <p-tabpanel value="0">
      <p-table
        [value]="filteredItems"
        [loading]="loading">

        <ng-template pTemplate="header">
          <tr>
            <th>ุงูุงุณู</th>
            <th>ุงููุญุฏุฉ</th>
            <th>ุดุฑุงุก</th>
            <th>ุจูุน</th>
            <th>ุฅุฌุฑุงุกุงุช</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-item>
          <tr>
            <td>{{ item.name }}</td>
            <td>{{ item.unit }}</td>
            <td>{{ item.defaultPurchasePrice }}</td>
            <td>{{ item.defaultSalePrice }}</td>
            <td>
              <p-button icon="pi pi-pencil" text (onClick)="openEditForm(item)" />
              <p-button icon="pi pi-trash" text severity="danger" (onClick)="deleteItem(item)" />
            </td>
          </tr>
        </ng-template>

      </p-table>
    </p-tabpanel>

    <!-- ูุฑูุช -->
    <p-tabpanel value="1">
      <div class="cards">
        <div class="card" *ngFor="let item of filteredItems">
            <div>
            <div class="image-and-actions">   
            <img
                                class="rounded w-full"
                                [src]="'https://bf1af2.akinoncloudcdn.com/products/2025/10/22/620480/175cff66-dcd3-4e17-8f52-30fb3d537f1e_size256_cropCenter.jpg'"
                                style="max-width:150px ; max-height:150px"
                            />
                            
        </div>             <div >
          <h3>{{ item.name }}</h3>
          <p>ุงููุญุฏุฉ: {{ item.unit }}</p>
          <p>ุดุฑุงุก: {{ item.defaultPurchasePrice }}</p>
          <p>ุจูุน: {{ item.defaultSalePrice }}</p>

          
          </div>
          </div>
          <div class="actions">
            <p-button icon="pi pi-pencil" text (onClick)="openEditForm(item)" />
            <p-button icon="pi pi-trash" text severity="danger" (onClick)="deleteItem(item)" />
          </div>
        </div>
      </div>

     
    </p-tabpanel>

  </p-tabpanels>

</p-tabs>

  <!-- Dialog -->
  <p-dialog
    [(visible)]="isDialogOpen"
    [modal]="true"
    [style]="{ width: '400px' }"
    header="ุจูุงูุงุช ุงูุตูู">

    <form [formGroup]="form" class="form">

      <label>ุงูุงุณู</label>
      <input pInputText formControlName="name" />

      <label>ุงููุญุฏุฉ</label>
      <input pInputText formControlName="unit" />

      <label>ุณุนุฑ ุงูุดุฑุงุก</label>
      <input type="number" pInputText formControlName="defaultPurchasePrice" />

      <label>ุณุนุฑ ุงูุจูุน</label>
      <input type="number" pInputText formControlName="defaultSalePrice" />

      <label>ุญุฏ ุฅุนุงุฏุฉ ุงูุทูุจ</label>
      <input type="number" pInputText formControlName="reorderLevel" />

      <div class="dialog-actions">
        <p-button label="ุญูุธ"  />
      </div>

    </form>

  </p-dialog>

</div>
